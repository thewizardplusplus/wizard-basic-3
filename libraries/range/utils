include "general"
include "array/number"

structure RangeInterface
	size
	value
	first
	last
	index
end

function RangeNext(range)
	if range.last then
		return FALSE
	end

	if Compare(GetType(range), "NumberRange") == 0 then
		range.value = range.value + range.step
		range.first = range.value == range.minimum
		if not range.reverse then
			range.last = range.value + range.step > range.maximum
		else
			range.last = range.value + range.step < range.maximum
		end
		range.index = range.index + 1
	else if Compare(GetType(range), "ArrayRange") == 0 then
		if not range.reverse then
			range.index = range.index + 1
		else
			range.index = range.index - 1
		end
		range.value = range.array[range.index]
		range.first = range.index == range.start
		if not range.reverse then
			range.last = range.finish - range.index == 1
		else
			range.last = range.finish - range.index == -1
		end
	end

	return TRUE
end
