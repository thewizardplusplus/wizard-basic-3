include "array/number"
include "range/number"
include "range/array"
include "general"

note Range(minimum, maximum, step = 1, reverse = FALSE)
note Range(array, start = 0, finish = GetLength(array), reverse = FALSE)
function Range(args)
	if Compare(GetType(args[0]), "number") == COMPARE_RESULT_EQUAL then
		return NumberRangeNew(args)
	else if Compare(GetType(args[0]), "array") == COMPARE_RESULT_EQUAL then
		return ArrayRangeNew(args)
	end
end

function Next(range)
	if range.last then
		return FALSE
	end

	if Compare(GetType(range), "NumberRange") == COMPARE_RESULT_EQUAL then
		range.value = range.value + range.step
		range.first = range.value == range.minimum

		if not range.reverse then
			range.last = range.value + range.step > range.maximum
		else
			range.last = range.value + range.step < range.maximum
		end

		range.index = range.index + 1
	else if Compare(GetType(range), "ArrayRange") == COMPARE_RESULT_EQUAL then
		if not range.reverse then
			range.index = range.index + 1
		else
			range.index = range.index - 1
		end

		range.value = range.array[range.index]
		range.first = range.index == range.start

		if not range.reverse then
			range.last = range.finish - range.index == 1
		else
			range.last = range.finish - range.index == -1
		end
	end

	return TRUE
end
