include "enumeration/utils"
include "array/number"
include "io"

structure __Slice
	array
	start
	finish
	size
end

function Slice(arguments)
	let enumeration = arguments[0]
	let enumeration_size = Size(enumeration)

	let start = NULL
	let finish = NULL
	if GetLength(arguments) >= 3 then
		start = arguments[1]
		if start < 0 or start > enumeration_size then
			Die("Error: out of range.")
		end

		finish = arguments[2]
		if finish < 0 or finish > enumeration_size then
			Die("Error: out of range.")
		end

		if finish <= start then
			Die("Error: invalid arguments.")
		end
	else
		start = 0
		finish = Size(enumeration)
	end

	let slice = new Slice
	if Compare(GetType(enumeration), "array") == 0 then
		slice.array = enumeration
		slice.start = start
		slice.finish = finish
	else if Compare(GetType(enumeration), "__Slice") == 0 then
		slice.array = enumeration.array
		slice.start = enumeration.start + start
		slice.finish = enumeration.start + finish
	else
		Die("Error: invalid type.")
	end

	slice.size = finish - start
	return slice
end
