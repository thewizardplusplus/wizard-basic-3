Wizard BASIC 3 &mdash; интерпретируемый высокоуровневый язык программирования.
Поддерживает структурную парадигму, обладает строгой динамической типизацией и
сборкой мусора.

### Исходники

Файлы исходного кода должны быть в кодировке ASCII.

### Ключевые слова

17 ключевых слов: `NULL`, `and`, `break`, `continue`, `do`, `else`, `end`,
`function`, `if`, `let`, `new`, `not`, `or`, `return`, `structure`, `then`,
`while`.

### Типы

Типизация: строгая динамическая.

Менеджмент памяти: сборка мусора.

#### Нулевой тип

Название: null.

Тип: фиктивный тип; не хранит значение, а служит маркером его отсутствия.

Копирование: по значению.

Хранение: на стеке.

Определение: `"NULL"`.

#### Числа

Название: number.

Тип: с плавающей запятой, 8 байт.

Копирование: по значению.

Хранение: на стеке.

Определение:

    `/'(\\.|[^'])'/`
    `/\d+(\.\d+)?/`

#### Массивы

Название: array.

Тип: динамический массив.

Копирование: по ссылке.

Хранение:

* ссылки &mdash; на стеке;
* значения &mdash; в куче.

Определение:

    "new", "array", "(", expression, ")"
    "[", [expression, {",", expression}], "]"

Доступ к элементам: `expression, "[", expression, "]"`.

#### Строки

Строками являются массивы, хранящие коды символов. Используется кодировка ASCII.

Определение: `/"(\\.|[^"])*"/`.

#### Структуры

Название: задаётся программистом.

Копирование: по ссылке.

Хранение:

* ссылки &mdash; на стеке;
* значения &mdash; в куче.

Объявление:

    "structure", identifier,
        identifier,
        {identifier},
    "end"

Может располагаться только в глобальной области видимости.

Определение: `"new", identifier`.

Доступ к полям: `expression, ".", identifier`.

#### Логические значения

В качестве ложного логического значения принимаются число 0 и значение `NULL`.

В качестве истинного логического значения принимаются числа, отличные от 0, и
любые ссылки на массивы и структуры.

### Операции

Перечислены в порядке убывания приоритета.

Приоритет | Операция | Описание | Ассоциативность | Типы | Особенности
--- | --- | --- | --- | --- | ---
1 | `[]` | доступ к элементам массива | левая | массивы | &mdash;
1 | `.` | доступ к полям структур | левая | структуры | &mdash;
2 | `new` | определение структур | &mdash; | идентификаторы структур | &mdash;
2 | `-` | унарный минус | правая | числа | &mdash;
2 | `not` | логическое отрицание | правая | все | &mdash;
3 | `*` | умножение | левая | числа | &mdash;
3 | `/` | деление | левая | числа | &mdash;
3 | `%` | остаток от деления | левая | числа | &mdash;
4 | `+` | сложение | левая | числа | &mdash;
4 | `-` | вычитание | левая | числа | &mdash;
5 | `<` | меньше | левая | числа | &mdash;
5 | `<=` | меньше или равно | левая | числа | &mdash;
5 | `>` | больше | левая | числа | &mdash;
5 | `>=` | больше или равно | левая | числа | &mdash;
6 | `==` | равенство | левая | все | при сравнении массивов и структур сравнивает ссылки
6 | `/=` | неравенство | левая | все | при сравнении массивов и структур сравнивает ссылки
7 | `and` | логическое и | левая | все | &mdash;
8 | `or` | логическое или | левая | все | &mdash;

### Переменные

Объявление и определение: `"let", identifier, "=", expression`.

### Присваивание

    expression, "=", expression

В качестве левого `expression` могут использоваться переменные, элементы
массивов и поля структур.

### Управляющие конструкции

#### Условие

    "if", expression, "then",
        statement,
        {statement},
    {"else", "if", expression, "then",
        statement,
        {statement}},
    ["else",
        statement,
        {statement}],
    "end"

#### Цикл

    "while", expression, "do",
        statement,
        {statement},
    "end"

Переход к следующей итерации цикла: `continue`.

Прерывание цикла: `break`.

### Функции

Объявление:

    "function", identifier, "(", [identifier, {",", identifier}], ")",
        statement,
        {statement},
    "end"

Может располагаться только в глобальной области видимости.

Перегрузка функций не поддерживается.

Возврат из функции: `"return", [expression]`. По умолчанию возвращается `NULL`.

Вызов функции: `identifier, "(", [expression, {",", expression}], ")"`. При
вызове функции проверяется соответствие числа аргументов числу параметров.

### Точка входа

    function Main(arguments)

В `arguments` передаются аргументы командной строки. В `arguments[0]` передаётся
путь к исполняемому файлу.

### Модульность

Тип: включением кода как текста.

Использование: `"include", expression`.

В качестве `expression` может использоваться лишь определение строки. Строка
должна содержать относительный путь к файлу с кодом.

Файлы включаются рекурсивно, и каждый только один раз.

### Комментарии

Однострочные: `? /^\s*note\b[^\n]*\n/ ?`.

Многострочные: `? /^\s*long\s+note\b.*?\.\.\.\s*$/ ?`.

### Рантайм

* модуль `lang`:
    * `ToString(number, precision)`;
    * `GetSize(array)`;
    * `GetType(value)`;
* модуль `system`:
    * `GetTime()`;
    * `Exit(exit_code)`;
    * модуль `system.io`:
        * `Read(stream, number_of_bytes)`;
        * `Write(stream, bytes)`;
        * `Open(path, mode)` &mdash; режим открытия может быть:
            * 0 (чтение);
            * 1 (запись);
            * 2 (дополнение);
        * `Close(stream)`;
* модуль `maths`:
    * `Sin(number)`;
    * `Cos(number)`;
    * `Tg(number)`;
    * `Arcsin(number)`;
    * `Arccos(number)`;
    * `Arctg(number)`;
    * `SquareRoot(number)`;
    * `Power(base, exponent)`;
    * `Exp(number)`;
    * `Ln(number)`;
    * `Integral(number)`;
    * `GetRandom()` &mdash; возвращает случайное число в диапазоне [0; 1].
